'use strict';var aa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},e;if("function"==typeof Object.setPrototypeOf)e=Object.setPrototypeOf;else{var f;a:{var ba={ba:!0},h={};try{h.__proto__=ba;f=h.ba;break a}catch(a){}f=!1}e=f?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var k=e;
function l(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""}var m="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},n="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;
function p(a,b){if(b){var c=n;a=a.split(".");for(var d=0;d<a.length-1;d++){var g=a[d];g in c||(c[g]={});c=c[g]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&m(c,a,{configurable:!0,writable:!0,value:b})}}p("String.prototype.endsWith",function(a){return a?a:function(a,c){var b=l(this,a,"endsWith");a+="";void 0===c&&(c=b.length);c=Math.max(0,Math.min(c|0,b.length));for(var g=a.length;0<g&&0<c;)if(b[--c]!=a[--g])return!1;return 0>=g}});function q(){q=function(){};n.Symbol||(n.Symbol=ca)}
var ca=function(){var a=0;return function(b){return"jscomp_symbol_"+(b||"")+a++}}();function r(){q();var a=n.Symbol.iterator;a||(a=n.Symbol.iterator=n.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&m(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return da(this)}});r=function(){}}function da(a){var b=0;return ea(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function ea(a){r();a={next:a};a[n.Symbol.iterator]=function(){return this};return a}
function fa(a,b){r();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var g=c++;return{value:b(g,a[g]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}p("Array.prototype.keys",function(a){return a?a:function(){return fa(this,function(a){return a})}});p("Object.values",function(a){return a?a:function(a){var b=[],d;for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&b.push(a[d]);return b}});
p("String.prototype.startsWith",function(a){return a?a:function(a,c){var b=l(this,a,"startsWith");a+="";var g=b.length,A=a.length;c=Math.max(0,Math.min(c|0,b.length));for(var x=0;x<A&&c<g;)if(b[c++]!=a[x++])return!1;return x>=A}});
function t(){var a=u,b=v;this.canvas=document.createElement("canvas");this.canvas.setAttribute("width",a);this.canvas.setAttribute("height",b);this.canvas.style.width=1.4*a+"px";this.canvas.style.height=1.4*b+"px";this.canvas.style.backgroundColor="black";document.getElementById("game").appendChild(this.canvas);this.A=this.canvas.getContext("2d");this.width=a;this.height=b;this.scale=1.4;this.entities=[];this.V=this.N=!1;ha(this);new (window.AudioContext||window.webkitAudioContext);ia(this);this.W(performance.now())}
function ia(a){a.B={};[].forEach(function(b){a.B[b]={};a.B[b].loaded=!1;b.endsWith(".png")||b.endsWith(".jpg")?(a.B[b].data=new Image,a.B[b].data.onload=function(){return a.B[b].loaded=!0},a.B[b].data.src=b):b.endsWith(".wav")||b.endsWith(".mp3")?(a.B[b].data=new Audio,a.B[b].data.src=b,a.B[b].data.load(),a.B[b].loaded=!0):console.assert(!1,"Unable to load "+b+" - unknown type")})}function ja(a){return 0<Object.keys(a.B).length&&0==Object.values(a.B).every(function(a){return a.loaded})}
t.prototype.W=function(a){window.requestAnimationFrame(this.W.bind(this));if(!ja(this)){var b=Math.min((a-(this.fa||a))/1E3,.2);this.fa=a;this.A.clearRect(0,0,this.width,this.height);void 0!==this.state&&this.state(b);ka(this);la(this,b);ma(this);na(this)}};function w(a){var b=y;Object.defineProperty(a,"z",{set:function(c){a.U=c;b.N=!0},get:function(){return a.U}});a.U=0<b.entities.length?b.entities[b.entities.length-1].z+1:0;b.entities.push(a)}
function la(a,b){a.entities.forEach(function(a){void 0!==a.update&&a.update(b)});a.V&&(a.entities=a.entities.filter(function(a){return!0!==a.ja}),a.V=!1)}function ma(a){a.entities.forEach(function(a){void 0!==a.F&&a.F()})}function ka(a){a.N&&(a.entities.sort(function(a,c){return a.z-c.z}),a.N=!1)}
function z(a){var b=y,c=void 0!==a.angle?a.angle*Math.PI/180:0,d=void 0!==a.C?a.C:"Arial",g=void 0!==a.fontSize?a.fontSize:12,A=void 0!==a.fontStyle?a.fontStyle:"",x=void 0!==a.color?a.color:"#FFF",oa=void 0!==a.textAlign?a.textAlign.toLowerCase():"left",pa=void 0!==a.textBaseline?a.textBaseline.toLowerCase():"bottom";b.A.save();b.A.translate(a.x,a.y);b.A.rotate(c);b.A.font=A+" "+g+"px "+d;b.A.fillStyle=x;b.A.textAlign=oa;b.A.textBaseline=pa;b.A.fillText(a.text,0,0);b.A.restore()}
function ha(a){a.ha={x:0,y:0};a.K={x:0,y:0};a.Y=!1;a.$=!1;a.Z=!1;a.aa=!1;window.addEventListener("mousemove",function(b){a.K.x+=b.ka;a.K.y+=b.la;a.ha={x:b.clientX,y:b.clientY}});window.addEventListener("mousedown",function(b){0===b.button?(a.Y=!0,a.Z=!0):2===b.button&&(a.$=!0,a.aa=!0)});window.addEventListener("mouseup",function(b){0===b.button?a.Y=!1:2===b.button&&(a.$=!1)});a.P={a:"a",b:"b",c:"c",d:"d",e:"e",f:"f",g:"g",h:"h",i:"i",j:"j",k:"k",l:"l",m:"m",n:"n",o:"o",p:"p",q:"q",r:"r",s:"s",t:"t",
u:"u",v:"v",w:"w",x:"x",y:"y",z:"z",0:"zero",1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",arrowup:"up",arrowdown:"down",arrowleft:"left",arrowright:"right"," ":"space",escape:"escape",control:"ctrl",shift:"shift",alt:"alt",tab:"tab",enter:"enter",backspace:"backspace"};a.keys={};a.M={};Object.keys(a.P).forEach(function(b){return a.keys[b]=!1});window.addEventListener("keydown",function(b){B(a,b,!0)});window.addEventListener("keyup",function(b){B(a,b,!1)})}
function B(a,b,c){var d=b.key.toLowerCase();void 0!==a.P[d]&&(d=a.P[d],a.M[d]=!1===a.keys[d]||void 0===a.keys[d],a.keys[d]=c,"up"!==d&&"down"!==d&&"left"!==d&&"right"!==d||b.preventDefault())}function na(a){a.K.x=0;a.K.y=0;a.Z=!1;a.aa=!1;Object.keys(a.M).forEach(function(b){a.M[b]=!1})}function C(){}C.prototype.F=function(){y.A.fillStyle=D;y.A.fillRect(0,0,u,v);y.A.fillStyle=E;y.A.fillRect(580,0,2,600);y.A.fillRect(0,406,580,22);y.A.fillRect(0,528,580,22);y.A.fillRect(580,528,280,22)};
function F(){}F.prototype.F=function(){y.A.fillStyle="#FFF";y.A.globalAlpha=.01;for(var a=0;100>a;a++)y.A.fillRect(0,10*a,u,7);y.A.globalAlpha=1;a=Date.now()%6E3/6E3*(v+400)*1.5;for(var b=y.A.createLinearGradient(0,a-400,0,a),c=0;100>=c;c++){var d=c/100;b.addColorStop(d,"rgba(255, 255, 255, "+.05*(.95>=d?d/.95:1-(d-.95)/(1-.95))+")")}y.A.fillStyle=b;y.A.fillRect(0,a-400,u,400)};
function G(){var a=this;this.lines=[];this.y=this.x=5;this.S=20;this.ga=66;this.lineHeight=20;this.I=[];this.X=void 0;window.addEventListener("keydown",function(b){b=b.key;if(!(0<a.I.length||0>=H.D)){var c=a.lines.length-1,d=a.lines[a.lines.length-1];"Enter"===b?(b=d.slice(a.lines[a.lines.length-1].startsWith("> ")?2:0).toLowerCase().trim(),c=b.split(" ")[0],b=b.split(" ").slice(1),void 0!==a.X?a.X(c):c in I?(c=I[c],"on"===b[0]?(c.H="online",J(K,""),L.G("communications system online")):"off"===b[0]?
(c.H="offline",J(K,""),L.G("communications system offline")):M(!1)):"help"===c?(c=0<b.length&&b[0]in I?I[b[0]]:void 0,d=2===b.length&&"-s"===b[1],1!==b.length&&(2!==b.length||"-s"!==b[1])||void 0===c||"disabled"===c.H?(J(a,"Usage: help [system name] [-s]\n"),J(a,"  -s      short version\n")):M(d)):"clear"===c?(a.lines=[],a.G("> ")):J(a,"Unknown command\n",.1,.01)):"Backspace"===b?d.length>(a.lines[a.lines.length-1].startsWith("> ")?2:0)&&(a.lines[c]=a.lines[c].slice(0,-1)):1===b.length&&d.length<
a.ga&&/[a-zA-Z0-9\s.,-=\\!/@#$%^&*()_+;:'"`~]/.test(b)&&(a.lines[c]+=b)}});this.G("> ")}G.prototype.G=function(a){this.lines.length===this.S&&this.lines.splice(0,1);this.lines.push(a)};function J(a,b,c,d){0===a.I.length&&a.G("");a.I.push({message:b,O:void 0!==c?c:0,da:void 0!==d?d:.005,J:0})}
G.prototype.update=function(a){if(0<this.I.length&&!(0>=H.D)){var b=this.I[0];if(0<b.O)b.O-=a;else if(0<b.message.length)for(;0<a&&0<b.message.length;){if(0<b.J){var c=Math.min(a,b.J);a-=c;b.J-=c}0>=b.J&&(c=b.message[0],"\n"===c?this.G(""):this.lines[this.lines.length-1]+=c,b.message=b.message.slice(1),b.J=b.da)}else this.I.splice(0,1),0===this.I.length&&this.G("> ")}};
G.prototype.F=function(){var a=this;this.lines.forEach(function(b,c){z({text:b,x:a.x,y:a.y+c*a.lineHeight,C:"courier",fontSize:14,fontStyle:"bold",color:E,textBaseline:"top"})});if(!(0>=H.D)&&500>Date.now()%1E3){var b=this.x+8.4*this.lines[this.lines.length-1].length+2,c=this.y+(this.lines.length-1)*this.lineHeight,d=.35*this.lineHeight,g=.8*this.lineHeight;y.A.fillStyle=E;y.A.fillRect(b,c,d,g)}};function N(){this.lines=[];this.x=5;this.y=410;this.lineHeight=18;this.S=5}
N.prototype.G=function(a){this.lines.length===this.S&&this.lines.splice(0,1);this.lines.push(a)};N.prototype.F=function(){var a=this;z({text:"STATUS MESSAGES",x:this.x,y:this.y+8,C:"courier",fontSize:18,fontStyle:"bold",color:"#000",textBaseline:"middle"});this.lines.forEach(function(b,c){z({text:b,x:a.x,y:a.y+24+c*a.lineHeight,C:"courier",fontSize:14,fontStyle:"bold",color:E,textBaseline:"top"})})};function O(){this.x=5;this.y=532;this.D=100;this.ea=[0,1,1.5,2.5,3,3.5,4,4.5,5,6,6.5]}
O.prototype.update=function(a){this.D=Math.max(this.D-this.ea[qa()]*a,0)};O.prototype.F=function(){z({text:"SYSTEM HEALTH: "+Math.floor(this.D)+"%",x:this.x,y:this.y+8,C:"courier",fontSize:18,fontStyle:"bold",color:"#000",textBaseline:"middle"});for(var a=Math.floor(this.D/5),b=0;b<a;++b)y.A.fillStyle=E,y.A.fillRect(this.x+28.7*b,this.y+24,24.7,38)};
function P(){this.data=[];this.data.push("");this.data.push("");this.x=585;this.y=532;this.D=100;this.lineHeight=18;this.ca=.5;this.L=0;this.R=50;this.characterSet="abcdefghijklmnopqrstuvwxyz0123456789";for(var a=0;a<this.R;++a)Q(this)}function Q(a){for(var b=0;b<a.data.length;++b)a.data[b].length===a.R&&(a.data[b]=a.data[b].slice(1)),a.data[b]+=a.characterSet.charAt(Math.floor(Math.random()*a.characterSet.length))}P.prototype.update=function(a){this.L-=a;0>=this.L&&(this.L=this.ca,Q(this))};
P.prototype.F=function(){z({text:"DATA STREAM",x:this.x,y:this.y+8,C:"courier",fontSize:18,fontStyle:"bold",color:"#000",textBaseline:"middle"});for(var a=0;a<this.data.length;++a)z({text:this.data[a].substr(0,this.R/2),x:this.x,y:this.y+24+this.lineHeight*a,C:"courier",fontSize:14,fontStyle:"bold",color:E,textBaseline:"top"})};function R(a,b){this.name=a;this.ia=b;this.H="disabled";this.T=0;0===b&&(this.H="online")}R.prototype.update=function(a){this.T="offline"===this.H?this.T+a:0};
R.prototype.F=function(){if("disabled"!==this.H){var a=10+52*this.ia,b="offline"===this.H&&250>Date.now()%500;b&&(y.A.fillStyle="#880000",y.A.fillRect(590,a,200,42));y.A.strokeStyle=E;y.A.lineWidth=2;y.A.strokeRect(590,a,200,42);z({text:this.name,x:600,y:a+22,C:"courier",fontSize:28,fontStyle:"bold",color:b?"#FFF":E,textBaseline:"middle"})}};function qa(){var a=0;S.forEach(function(b){"offline"===b.H&&1<=b.T&&a++});return a}function T(){R.call(this,"COMMS",0)}T.prototype=aa(R.prototype);
T.prototype.constructor=T;if(k)k(T,R);else for(var U in R)if("prototype"!=U)if(Object.defineProperties){var V=Object.getOwnPropertyDescriptor(R,U);V&&Object.defineProperty(T,U,V)}else T[U]=R[U];T.ma=R.prototype;T.prototype.update=function(a){R.prototype.update.call(this,a)};
function M(a){J(K,"comms: comms [on|off]\n");a||(J(K,"\n"),J(K,"Controls the communications system.\n"),J(K,"When offline, inbound status messages\n"),J(K,"may not be recieved properly.\n"),J(K,"\n"),J(K,"  on      enable communications\n"),J(K,"  off     disable communications\n"))}function W(){}W.prototype.update=function(){};function X(){}
X.prototype.F=function(){y.A.globalAlpha=.75;y.A.fillStyle="#000";y.A.fillRect(0,0,u,v);y.A.globalAlpha=1;y.A.fillStyle="#FFF";y.A.fillRect(0,.32*v,u,.35*v);y.A.fillStyle="#880000";y.A.fillRect(0,.33*v,u,.33*v);z({text:"GAME OVER",x:.5*u,y:.5*v-70,C:"courier",fontSize:40,fontStyle:"bold",color:"#FFF",textAlign:"center",textBaseline:"middle"})};var u=800,v=600,D,E,S,I,K,L,H,Y,y=new t;y.state=Z;
function Z(){D="#141414";E="#02E002";w(new W);w(new C);K=new G;L=new N;H=new O;Y=new P;w(K);w(L);w(H);w(Y);S=[];S.push(new T);S.push(new R("MEMORY",1));S.push(new R("SECURITY",2));S.push(new R("THERMAL",3));S.push(new R("IMAGING",4));S.push(new R("NETWORK",5));S.push(new R("PROPULSION",6));S.push(new R("LASERS",7));S.push(new R("TIMING",8));S.push(new R("GRAVITY",9));I={};S.forEach(function(a){w(a);I[a.name.toLowerCase()]=a});w(new F);y.state=ra}function ra(){0>=H.D&&(w(new X),y.state=sa)}
function sa(){y.M.r&&(y.entities=[],y.state=Z)};