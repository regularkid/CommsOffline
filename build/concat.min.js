'use strict';var aa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},e;if("function"==typeof Object.setPrototypeOf)e=Object.setPrototypeOf;else{var f;a:{var ba={ea:!0},g={};try{g.__proto__=ba;f=g.ea;break a}catch(a){}f=!1}e=f?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var k=e;
function l(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""}var m="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},n="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;
function p(a,b){if(b){var c=n;a=a.split(".");for(var d=0;d<a.length-1;d++){var h=a[d];h in c||(c[h]={});c=c[h]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&m(c,a,{configurable:!0,writable:!0,value:b})}}p("String.prototype.endsWith",function(a){return a?a:function(a,c){var b=l(this,a,"endsWith");a+="";void 0===c&&(c=b.length);c=Math.max(0,Math.min(c|0,b.length));for(var h=a.length;0<h&&0<c;)if(b[--c]!=a[--h])return!1;return 0>=h}});function q(){q=function(){};n.Symbol||(n.Symbol=ca)}
var ca=function(){var a=0;return function(b){return"jscomp_symbol_"+(b||"")+a++}}();function r(){q();var a=n.Symbol.iterator;a||(a=n.Symbol.iterator=n.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&m(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return da(this)}});r=function(){}}function da(a){var b=0;return ea(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function ea(a){r();a={next:a};a[n.Symbol.iterator]=function(){return this};return a}
function fa(a,b){r();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var h=c++;return{value:b(h,a[h]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}p("Array.prototype.keys",function(a){return a?a:function(){return fa(this,function(a){return a})}});p("Object.values",function(a){return a?a:function(a){var b=[],d;for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&b.push(a[d]);return b}});
p("String.prototype.startsWith",function(a){return a?a:function(a,c){var b=l(this,a,"startsWith");a+="";var h=b.length,B=a.length;c=Math.max(0,Math.min(c|0,b.length));for(var y=0;y<B&&c<h;)if(b[c++]!=a[y++])return!1;return y>=B}});
function t(){var a=u,b=v;this.canvas=document.createElement("canvas");this.canvas.setAttribute("width",a);this.canvas.setAttribute("height",b);this.canvas.style.width=1.4*a+"px";this.canvas.style.height=1.4*b+"px";this.canvas.style.backgroundColor="black";document.getElementById("game").appendChild(this.canvas);this.A=this.canvas.getContext("2d");this.width=a;this.height=b;this.scale=1.4;this.entities=[];this.X=this.P=!1;ha(this);new (window.AudioContext||window.webkitAudioContext);ia(this);this.Y(performance.now())}
function ia(a){a.B={};[].forEach(function(b){a.B[b]={};a.B[b].loaded=!1;b.endsWith(".png")||b.endsWith(".jpg")?(a.B[b].data=new Image,a.B[b].data.onload=function(){return a.B[b].loaded=!0},a.B[b].data.src=b):b.endsWith(".wav")||b.endsWith(".mp3")?(a.B[b].data=new Audio,a.B[b].data.src=b,a.B[b].data.load(),a.B[b].loaded=!0):console.assert(!1,"Unable to load "+b+" - unknown type")})}function ja(a){return 0<Object.keys(a.B).length&&0==Object.values(a.B).every(function(a){return a.loaded})}
t.prototype.Y=function(a){window.requestAnimationFrame(this.Y.bind(this));if(!ja(this)){var b=Math.min((a-(this.ja||a))/1E3,.2);this.ja=a;this.A.clearRect(0,0,this.width,this.height);void 0!==this.state&&this.state(b);ka(this);la(this,b);ma(this);na(this)}};function w(a){var b=x;Object.defineProperty(a,"z",{set:function(c){a.W=c;b.P=!0},get:function(){return a.W}});a.W=0<b.entities.length?b.entities[b.entities.length-1].z+1:0;b.entities.push(a)}
function la(a,b){a.entities.forEach(function(a){void 0!==a.update&&a.update(b)});a.X&&(a.entities=a.entities.filter(function(a){return!0!==a.oa}),a.X=!1)}function ma(a){a.entities.forEach(function(a){void 0!==a.H&&a.H()})}function ka(a){a.P&&(a.entities.sort(function(a,c){return a.z-c.z}),a.P=!1)}
function z(a){var b=x,c=void 0!==a.angle?a.angle*Math.PI/180:0,d=void 0!==a.G?a.G:"Arial",h=void 0!==a.fontSize?a.fontSize:12,B=void 0!==a.fontStyle?a.fontStyle:"",y=void 0!==a.color?a.color:"#FFF",qa=void 0!==a.textAlign?a.textAlign.toLowerCase():"left",ra=void 0!==a.textBaseline?a.textBaseline.toLowerCase():"bottom";b.A.save();b.A.translate(a.x,a.y);b.A.rotate(c);b.A.font=B+" "+h+"px "+d;b.A.fillStyle=y;b.A.textAlign=qa;b.A.textBaseline=ra;b.A.fillText(a.text,0,0);b.A.restore()}
function ha(a){a.la={x:0,y:0};a.K={x:0,y:0};a.$=!1;a.ba=!1;a.aa=!1;a.ca=!1;window.addEventListener("mousemove",function(b){a.K.x+=b.pa;a.K.y+=b.qa;a.la={x:b.clientX,y:b.clientY}});window.addEventListener("mousedown",function(b){0===b.button?(a.$=!0,a.aa=!0):2===b.button&&(a.ba=!0,a.ca=!0)});window.addEventListener("mouseup",function(b){0===b.button?a.$=!1:2===b.button&&(a.ba=!1)});a.S={a:"a",b:"b",c:"c",d:"d",e:"e",f:"f",g:"g",h:"h",i:"i",j:"j",k:"k",l:"l",m:"m",n:"n",o:"o",p:"p",q:"q",r:"r",s:"s",
t:"t",u:"u",v:"v",w:"w",x:"x",y:"y",z:"z",0:"zero",1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",arrowup:"up",arrowdown:"down",arrowleft:"left",arrowright:"right"," ":"space",escape:"escape",control:"ctrl",shift:"shift",alt:"alt",tab:"tab",enter:"enter",backspace:"backspace"};a.keys={};a.N={};Object.keys(a.S).forEach(function(b){return a.keys[b]=!1});window.addEventListener("keydown",function(b){A(a,b,!0)});window.addEventListener("keyup",function(b){A(a,b,!1)})}
function A(a,b,c){var d=b.key.toLowerCase();void 0!==a.S[d]&&(d=a.S[d],a.N[d]=!1===a.keys[d]||void 0===a.keys[d],a.keys[d]=c,"up"!==d&&"down"!==d&&"left"!==d&&"right"!==d||b.preventDefault())}function na(a){a.K.x=0;a.K.y=0;a.aa=!1;a.ca=!1;Object.keys(a.N).forEach(function(b){a.N[b]=!1})}function C(){}C.prototype.H=function(){x.A.fillStyle=D;x.A.fillRect(0,0,u,v);x.A.fillStyle=E;x.A.fillRect(580,0,2,600);x.A.fillRect(0,406,580,22);x.A.fillRect(0,528,580,22);x.A.fillRect(580,528,280,22)};
function F(){}F.prototype.H=function(){x.A.fillStyle="#FFF";x.A.globalAlpha=.01;for(var a=0;100>a;a++)x.A.fillRect(0,10*a,u,7);x.A.globalAlpha=1;a=Date.now()%6E3/6E3*(v+400)*1.5;for(var b=x.A.createLinearGradient(0,a-400,0,a),c=0;100>=c;c++){var d=c/100;b.addColorStop(d,"rgba(255, 255, 255, "+.05*(.95>=d?d/.95:1-(d-.95)/(1-.95))+")")}x.A.fillStyle=b;x.A.fillRect(0,a-400,u,400)};
function G(){var a=this;this.lines=[];this.y=this.x=5;this.U=20;this.ka=66;this.lineHeight=20;this.I=[];this.Z=void 0;window.addEventListener("keydown",function(b){b=b.key;if(!(0<a.I.length||0>=H.F)){var c=a.lines.length-1,d=a.lines[a.lines.length-1];"Enter"===b?(b=d.slice(a.lines[a.lines.length-1].startsWith("> ")?2:0).toLowerCase().trim(),c=b.split(" ")[0],b=b.split(" ").slice(1),void 0!==a.Z?a.Z(c):c in I?(c=I[c],"on"===b[0]?(c.D="online",J(K,""),L.C("communications system online")):"off"===b[0]?
(c.D="offline",J(K,""),L.C("communications system offline")):M(!1)):"help"===c?(c=0<b.length&&b[0]in I?I[b[0]]:void 0,d=2===b.length&&"-s"===b[1],1!==b.length&&(2!==b.length||"-s"!==b[1])||void 0===c||"disabled"===c.D?(J(a,"Usage: help [system name] [-s]\n"),J(a,"  -s      short version\n")):M(d)):"clear"===c?(a.lines=[],a.C("> ")):J(a,"Unknown command\n",.1,.01)):"Backspace"===b?d.length>(a.lines[a.lines.length-1].startsWith("> ")?2:0)&&(a.lines[c]=a.lines[c].slice(0,-1)):1===b.length&&d.length<
a.ka&&/[a-zA-Z0-9\s.,-=\\!/@#$%^&*()_+;:'"`~]/.test(b)&&(a.lines[c]+=b)}});this.C("> ")}G.prototype.C=function(a){this.lines.length===this.U&&this.lines.splice(0,1);this.lines.push(a)};function J(a,b,c,d){0===a.I.length&&a.C("");a.I.push({message:b,R:void 0!==c?c:0,ha:void 0!==d?d:.005,J:0})}
G.prototype.update=function(a){if(0<this.I.length&&!(0>=H.F)){var b=this.I[0];if(0<b.R)b.R-=a;else if(0<b.message.length)for(;0<a&&0<b.message.length;){if(0<b.J){var c=Math.min(a,b.J);a-=c;b.J-=c}0>=b.J&&(c=b.message[0],"\n"===c?this.C(""):this.lines[this.lines.length-1]+=c,b.message=b.message.slice(1),b.J=b.ha)}else this.I.splice(0,1),0===this.I.length&&this.C("> ")}};
G.prototype.H=function(){var a=this;this.lines.forEach(function(b,c){z({text:b,x:a.x,y:a.y+c*a.lineHeight,G:"courier",fontSize:14,fontStyle:"bold",color:E,textBaseline:"top"})});if(!(0>=H.F)&&500>Date.now()%1E3){var b=this.x+8.4*this.lines[this.lines.length-1].length+2,c=this.y+(this.lines.length-1)*this.lineHeight,d=.35*this.lineHeight,h=.8*this.lineHeight;x.A.fillStyle=E;x.A.fillRect(b,c,d,h)}};function N(){this.lines=[];this.x=5;this.y=410;this.lineHeight=18;this.U=5}
N.prototype.C=function(a){this.lines.length===this.U&&this.lines.splice(0,1);this.lines.push(a)};N.prototype.H=function(){var a=this;z({text:"STATUS MESSAGES",x:this.x,y:this.y+8,G:"courier",fontSize:18,fontStyle:"bold",color:"#000",textBaseline:"middle"});this.lines.forEach(function(b,c){z({text:b,x:a.x,y:a.y+24+c*a.lineHeight,G:"courier",fontSize:14,fontStyle:"bold",color:E,textBaseline:"top"})})};function O(){this.x=5;this.y=532;this.F=100;this.ia=[0,1,1.5,2.5,3,3.5,4,4.5,5,6,6.5]}
O.prototype.update=function(a){this.F=Math.max(this.F-this.ia[P()]*a,0)};O.prototype.H=function(){z({text:"SYSTEM HEALTH: "+Math.floor(this.F)+"%",x:this.x,y:this.y+8,G:"courier",fontSize:18,fontStyle:"bold",color:"#000",textBaseline:"middle"});var a=Math.floor(this.F/5),b=E;15>=this.F?b=125>Date.now()%250?"#880000":E:33>=this.F&&(b=250>Date.now()%500?"#880000":E);for(var c=0;c<a;++c)x.A.fillStyle=b,x.A.fillRect(this.x+28.7*c,this.y+24,24.7,38)};
function Q(){this.data=[];this.data.push("");this.data.push("");this.x=585;this.y=532;this.F=100;this.lineHeight=18;this.fa=.5;this.M=0;this.T=50;this.characterSet="abcdefghijklmnopqrstuvwxyz0123456789";for(var a=0;a<this.T;++a)R(this)}function R(a){for(var b=0;b<a.data.length;++b)a.data[b].length===a.T&&(a.data[b]=a.data[b].slice(1)),a.data[b]+=a.characterSet.charAt(Math.floor(Math.random()*a.characterSet.length))}Q.prototype.update=function(a){this.M-=a;0>=this.M&&(this.M=this.fa,R(this))};
Q.prototype.H=function(){z({text:"DATA STREAM",x:this.x,y:this.y+8,G:"courier",fontSize:18,fontStyle:"bold",color:"#000",textBaseline:"middle"});for(var a=0;a<this.data.length;++a)z({text:this.data[a].substr(0,this.T/2),x:this.x,y:this.y+24+this.lineHeight*a,G:"courier",fontSize:14,fontStyle:"bold",color:E,textBaseline:"top"})};function S(a,b){this.name=a;this.na=b;this.D="disabled";this.V=0}S.prototype.update=function(a){this.V="offline"===this.D?this.V+a:0};
S.prototype.H=function(){if("disabled"!==this.D){var a=10+52*this.na,b="offline"===this.D&&250>Date.now()%500;b&&(x.A.fillStyle="#880000",x.A.fillRect(590,a,200,42));x.A.strokeStyle=E;x.A.lineWidth=2;x.A.strokeRect(590,a,200,42);z({text:this.name,x:600,y:a+22,G:"courier",fontSize:28,fontStyle:"bold",color:b?"#FFF":E,textBaseline:"middle"})}};function P(){var a=0;T.forEach(function(b){"offline"===b.D&&1<=b.V&&a++});return a}function U(){S.call(this,"COMMS",0)}U.prototype=aa(S.prototype);
U.prototype.constructor=U;if(k)k(U,S);else for(var V in S)if("prototype"!=V)if(Object.defineProperties){var W=Object.getOwnPropertyDescriptor(S,V);W&&Object.defineProperty(U,V,W)}else U[V]=S[V];U.ra=S.prototype;U.prototype.update=function(a){S.prototype.update.call(this,a)};
function M(a){J(K,"comms: comms [on|off]\n");a||(J(K,"\n"),J(K,"Controls the communications system.\n"),J(K,"When offline, inbound status messages\n"),J(K,"may not be recieved properly.\n"),J(K,"\n"),J(K,"  on      enable communications\n"),J(K,"  off     disable communications\n"))}function X(){this.ga=30;this.L=5;this.O=0;this.da=5;this.ma=15;Y(this)}
X.prototype.update=function(a){this.O-=a;if(0>=this.O&&(Y(this),P()<=T.length))for(var b=100;0<--b;){var c=Math.floor(Math.random()*T.length);if("online"===T[c].D){b=T[c];b.D="offline";L.C(b.name+" system failure");break}}this.L-=a;if(0>=this.L)for(this.L=this.ga,a=0;a<T.length;a++)if("disabled"===T[a].D){b=T[a];b.D="online";L.C(b.name+" system operational");a<T.length-1&&L.C("Next system operational in "+this.L+" seconds");break}};function Y(a){a.O=a.da+Math.random()*(a.ma-a.da)}function Z(){}
Z.prototype.H=function(){x.A.globalAlpha=.75;x.A.fillStyle="#000";x.A.fillRect(0,0,u,v);x.A.globalAlpha=1;x.A.fillStyle="#FFF";x.A.fillRect(0,.32*v,u,.35*v);x.A.fillStyle="#880000";x.A.fillRect(0,.33*v,u,.33*v);z({text:"GAME OVER",x:.5*u,y:.5*v-70,G:"courier",fontSize:40,fontStyle:"bold",color:"#FFF",textAlign:"center",textBaseline:"middle"})};var u=800,v=600,D,E,T,I,K,L,H,oa,x=new t;x.state=pa;
function pa(){D="#141414";E="#02E002";w(new X);w(new C);K=new G;L=new N;H=new O;oa=new Q;w(K);w(L);w(H);w(oa);T=[];T.push(new U);T.push(new S("MEMORY",1));T.push(new S("SECURITY",2));T.push(new S("THERMAL",3));T.push(new S("IMAGING",4));T.push(new S("NETWORK",5));T.push(new S("PROPULSION",6));T.push(new S("LASERS",7));T.push(new S("TIMING",8));T.push(new S("GRAVITY",9));I={};T.forEach(function(a){w(a);I[a.name.toLowerCase()]=a});w(new F);x.state=sa}function sa(){0>=H.F&&(w(new Z),x.state=ta)}
function ta(){x.N.r&&(x.entities=[],x.state=pa)};